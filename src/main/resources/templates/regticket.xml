<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>EduConnect - Registration Ticket</title>
    <style>
        @page {
            size: A4;
            margin: 8mm;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 10px;
            line-height: 1.2;
            color: #333;
            background: white;
        }

        .ticket-container {
            width: 100%;
            max-width: 145mm; /* 75% of A4 width */
            height: 200mm; /* 75% of A4 height */
            background: white;
            border: 2px solid #7c3aed;
            border-radius: 8px;
            overflow: hidden;
            margin: 0 auto;
            position: relative;
        }

        /* Compact Header */
        .header {
            background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
            color: white;
            padding: 8px 15px;
            text-align: center;
            position: relative;
            height: 35px;
        }

        .header h1 {
            font-size: 12px;
            font-weight: 600;
            margin: 0;
            line-height: 1.4;
        }

        .ticket-info {
            position: absolute;
            top: 4px;
            font-size: 7px;
            font-weight: 600;
            background: rgba(255,255,255,0.2);
            padding: 2px 6px;
            border-radius: 6px;
        }

        .ticket-number { right: 15px; }
        .ticket-status { left: 15px; }

        /* QR Code Section - Centered */
        .qr-section {
            text-align: center;
            padding: 20px 15px;
            background: #f8fafc;
            border-bottom: 2px dashed #e2e8f0;
        }

        .qr-code {
            width: 100px;
            height: 100px;
            border: 2px solid #7c3aed;
            border-radius: 8px;
            background: white;
            padding: 6px;
            display: block;
            margin: 0 auto 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .qr-text {
            font-size: 9px;
            color: #64748b;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .verification-badge {
            background: #059669;
            color: white;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 8px;
            font-weight: 600;
            display: inline-block;
        }

        /* Main Content Area */
        .main-content {
            padding: 15px;
        }

        /* Compact Sections */
        .section {
            margin-bottom: 10px;
        }

        .section-title {
            font-size: 10px;
            font-weight: 600;
            color: #7c3aed;
            margin-bottom: 4px;
            padding-bottom: 2px;
            border-bottom: 1px solid #e2e8f0;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px 12px;
            margin-bottom: 6px;
        }

        .info-row {
            display: contents;
        }

        .info-label {
            font-weight: 600;
            color: #64748b;
            font-size: 8px;
        }

        .info-value {
            color: #1e293b;
            font-weight: 500;
            font-size: 8px;
            word-break: break-word;
        }

        /* Event Highlight Box */
        .event-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #0ea5e9;
            border-radius: 6px;
            padding: 8px;
            margin: 8px 0;
            text-align: center;
        }

        .event-name {
            font-size: 11px;
            font-weight: 700;
            color: #0c4a6e;
            margin-bottom: 4px;
        }

        .event-details {
            font-size: 8px;
            color: #0369a1;
            line-height: 1.3;
        }

        /* Compact Instructions */
        .instructions {
            background: #fffbeb;
            border-left: 3px solid #f59e0b;
            padding: 6px;
            font-size: 7px;
            color: #92400e;
            margin: 6px 0;
            text-align: center;
        }

        /* Single column layout for better space usage */
        .single-column {
            display: block;
            width: 100%;
        }

        /* Info boxes stacked vertically */
        .info-boxes {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin: 10px 0;
        }

        .info-box {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            padding: 6px;
            text-align: center;
        }

        .info-box-title {
            font-size: 8px;
            font-weight: 600;
            color: #7c3aed;
            margin-bottom: 2px;
        }

        .info-box-text {
            font-size: 7px;
            color: #64748b;
            line-height: 1.2;
        }

        /* Compact Footer */
        .footer {
            background: #1e293b;
            color: #f1f5f9;
            padding: 8px 15px;
            font-size: 7px;
            text-align: center;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }

        .footer-main {
            margin-bottom: 4px;
            line-height: 1.3;
        }

        .footer-info {
            font-size: 6px;
            color: #94a3b8;
            border-top: 1px solid #374151;
            padding-top: 4px;
        }

        .highlight {
            color: #a78bfa;
            font-weight: 600;
        }

        /* Print Optimization */
        @media print {
            body { margin: 0; padding: 0; }
            .ticket-container {
                max-width: none;
                width: 145mm;
                height: 200mm;
                border: 1px solid #ddd;
            }
        }
    </style>
</head>
<body>
    <div class="ticket-container">
        <!-- Header -->
        <div class="header">
            <div class="ticket-info ticket-status" th:text="${ticketStatus ?: 'ACTIVE'}">ACTIVE</div>
            <div class="ticket-info ticket-number">Ticket #<span th:text="${ticketNumber ?: 'EVT-12345'}">EVT-12345</span></div>
            <h1>EduConnect Registration Ticket</h1>
        </div>

        <!-- QR Code Section - Centered at Top -->
        <div class="qr-section">
            <img class="qr-code" th:src="'data:image/png;base64,' + ${qrCode}" alt="QR Code"/>
            <div class="qr-text">SCAN TO VERIFY ENTRY</div>
            <div class="verification-badge">VERIFIED TICKET</div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Event Information - Most Important -->
            <div class="section">
                <div class="event-box">
                    <div class="event-name" th:text="${eventTitle ?: 'Annual Tech Conference 2025'}">Annual Tech Conference 2025</div>
                    <div class="event-details">
                        <strong>üìç</strong> <span th:text="${eventLocation ?: 'Convention Center'}">Convention Center</span><br>
                        <strong>üìÖ</strong> <span th:text="${eventDuration ?: 'Sep 26, 2025 09:00 - 17:00'}">Sep 26, 2025 09:00 - 17:00</span>
                    </div>
                </div>
            </div>

            <!-- Participant Information -->
            <div class="section">
                <div class="section-title">üë§ Participant Details</div>
                <div class="info-grid">
                    <div class="info-row">
                        <div class="info-label">Name:</div>
                        <div class="info-value" th:text="${holderName ?: 'John Doe'}">John Doe</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Email:</div>
                        <div class="info-value" th:text="${holderEmail ?: 'john@example.com'}">john@example.com</div>
                    </div>
                    <div class="info-row" th:if="${holderUniversity}">
                        <div class="info-label">University:</div>
                        <div class="info-value" th:text="${holderUniversity}">ABC University</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Reg ID:</div>
                        <div class="info-value" th:text="${registrationId ?: 'REG001'}">REG001</div>
                    </div>
                </div>
            </div>

            <!-- Schedule & Ticket Info -->
            <div class="section">
                <div class="section-title">üìÖ Schedule & Ticket Info</div>
                <div class="info-grid">
                    <div class="info-row">
                        <div class="info-label">Start:</div>
                        <div class="info-value">
                            <span th:text="${eventStartDate ?: 'Sep 26, 2025'}">Sep 26, 2025</span>
                            <span th:text="${eventStartTime ?: '09:00'}">09:00</span>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">End:</div>
                        <div class="info-value">
                            <span th:text="${eventEndDate ?: 'Sep 26, 2025'}">Sep 26, 2025</span>
                            <span th:text="${eventEndTime ?: '17:00'}">17:00</span>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Issue Date:</div>
                        <div class="info-value" th:text="${issueDate ?: 'Sep 20, 2025'}">Sep 20, 2025</div>
                    </div>
                    <div class="info-row" th:if="${activationDate}">
                        <div class="info-label">Activated:</div>
                        <div class="info-value" th:text="${activationDate}">Sep 21, 2025</div>
                    </div>
                </div>
            </div>

            <!-- Important Info Boxes -->
            <div class="info-boxes">
                <div class="info-box" style="background: #fef3c7; border-color: #f59e0b;">
                    <div class="info-box-title" style="color: #92400e;">‚è∞ Arrival</div>
                    <div class="info-box-text" style="color: #92400e;">Arrive 15-30 min early</div>
                </div>
                <div class="info-box">
                    <div class="info-box-title">üÜî Requirements</div>
                    <div class="info-box-text">Bring valid photo ID</div>
                </div>
                <div class="info-box">
                    <div class="info-box-title">üì± Digital</div>
                    <div class="info-box-text">Show QR at venue entry</div>
                </div>
                <div class="info-box" th:if="${organizerContact}">
                    <div class="info-box-title">üìû Contact</div>
                    <div class="info-box-text" th:text="${organizerContact}">support@educonnect.com</div>
                </div>
            </div>

            <!-- Special Instructions -->
            <div class="instructions" th:if="${specialInstructions}">
                <strong>‚ö†Ô∏è Special Instructions:</strong><br>
                <span th:text="${specialInstructions}">Please arrive 30 minutes early for registration.</span>
            </div>
            <div class="instructions" th:unless="${specialInstructions}">
                <strong>‚ö†Ô∏è Important:</strong> Present this QR code + Valid ID for entry verification
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-main">
                <strong>EduConnect Platform</strong> | Support: support@educonnect.com
            </div>
            <div class="footer-info">
                Generated: <span th:text="${printDate ?: 'Sep 26, 2025 14:30'}">Sep 26, 2025 14:30</span> | Keep ticket secure until event
            </div>
        </div>
    </div>
</body>
</html>